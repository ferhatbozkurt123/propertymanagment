<div class="modal fade" [id]="modalId" tabindex="-1" aria-labelledby="tasinmazFormLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tasinmazFormLabel">
          <i class="fas" [ngClass]="isEditMode ? 'fa-edit' : 'fa-plus-circle'"></i>
          {{ isEditMode ? 'Taşınmaz Düzenle' : 'Yeni Taşınmaz Ekle' }}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="tasinmazForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <!-- İl -->
            <div class="col-md-6 mb-3">
              <label for="il" class="form-label">
                <i class="fas fa-city"></i> İl
              </label>
              <input
                type="text"
                class="form-control"
                id="il"
                formControlName="il"
                [ngClass]="{'is-invalid': isFieldInvalid('il')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('il')">
                İl alanı zorunludur
              </div>
            </div>

            <!-- İlçe -->
            <div class="col-md-6 mb-3">
              <label for="ilce" class="form-label">
                <i class="fas fa-building"></i> İlçe
              </label>
              <input
                type="text"
                class="form-control"
                id="ilce"
                formControlName="ilce"
                [ngClass]="{'is-invalid': isFieldInvalid('ilce')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('ilce')">
                İlçe alanı zorunludur
              </div>
            </div>

            <!-- Mahalle -->
            <div class="col-md-6 mb-3">
              <label for="mahalle" class="form-label">
                <i class="fas fa-home"></i> Mahalle
              </label>
              <input
                type="text"
                class="form-control"
                id="mahalle"
                formControlName="mahalle"
                [ngClass]="{'is-invalid': isFieldInvalid('mahalle')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('mahalle')">
                Mahalle alanı zorunludur
              </div>
            </div>

            <!-- Ada -->
            <div class="col-md-3 mb-3">
              <label for="ada" class="form-label">
                <i class="fas fa-square"></i> Ada
              </label>
              <input
                type="text"
                class="form-control"
                id="ada"
                formControlName="ada"
                [ngClass]="{'is-invalid': isFieldInvalid('ada')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('ada')">
                Ada alanı zorunludur
              </div>
            </div>

            <!-- Parsel -->
            <div class="col-md-3 mb-3">
              <label for="parsel" class="form-label">
                <i class="fas fa-layer-group"></i> Parsel
              </label>
              <input
                type="text"
                class="form-control"
                id="parsel"
                formControlName="parsel"
                [ngClass]="{'is-invalid': isFieldInvalid('parsel')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('parsel')">
                Parsel alanı zorunludur
              </div>
            </div>

            <!-- Nitelik -->
            <div class="col-md-6 mb-3">
              <label for="nitelik" class="form-label">
                <i class="fas fa-tag"></i> Nitelik
              </label>
              <select
                class="form-select"
                id="nitelik"
                formControlName="nitelik"
                [ngClass]="{'is-invalid': isFieldInvalid('nitelik')}"
              >
                <option value="">Seçiniz...</option>
                <option value="Tarla">Tarla</option>
                <option value="Arsa">Arsa</option>
                <option value="Bina">Bina</option>
                <option value="Daire">Daire</option>
                <option value="Diğer">Diğer</option>
              </select>
              <div class="invalid-feedback" *ngIf="isFieldInvalid('nitelik')">
                Nitelik alanı zorunludur
              </div>
            </div>

            <!-- Koordinatlar -->
            <div class="col-12 mb-3">
              <label class="form-label">
                <i class="fas fa-map-marker-alt"></i> Konum
              </label>
              <div class="map-container" id="formMap"></div>
            </div>

            <div class="col-md-6 mb-3">
              <label for="boylam" class="form-label">Boylam</label>
              <input
                type="number"
                class="form-control"
                id="boylam"
                formControlName="boylam"
                [ngClass]="{'is-invalid': isFieldInvalid('boylam')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('boylam')">
                Geçerli bir boylam giriniz
              </div>
            </div>

            <div class="col-md-6 mb-3">
              <label for="enlem" class="form-label">Enlem</label>
              <input
                type="number"
                class="form-control"
                id="enlem"
                formControlName="enlem"
                [ngClass]="{'is-invalid': isFieldInvalid('enlem')}"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('enlem')">
                Geçerli bir enlem giriniz
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times"></i> İptal
        </button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()" [disabled]="!tasinmazForm.valid || isSubmitting">
          <i class="fas" [ngClass]="isEditMode ? 'fa-save' : 'fa-plus'"></i>
          {{ isEditMode ? 'Güncelle' : 'Ekle' }}
          <span class="spinner-border spinner-border-sm ms-1" *ngIf="isSubmitting"></span>
        </button>
      </div>
    </div>
  </div>
</div>
